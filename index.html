<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>بازی هوشیار</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --gold: #D4AF37;
            --dark-gold: #B8860B;
            --black: #000000;
            --dark-gray: #111111;
            --gray: #222222;
            --light-gray: #333333;
            --white: #FFFFFF;
            --panel-bg: rgba(0, 0, 0, 0.95);
            --success: #2ecc71;
            --error: #e74c3c;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background-color: var(--black);
            color: var(--white);
            overflow: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* حذف کامل outline آبی در تمام مرورگرها */
        *:focus {
            outline: none !important;
        }

        button, input, select, textarea, .nav-item, .game-option-card {
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
            outline: none !important;
            box-shadow: none !important;
        }

        button:active, button:focus, 
        input:active, input:focus,
        .nav-item:active, .nav-item:focus,
        .game-option-card:active, .game-option-card:focus {
            outline: none !important;
            box-shadow: none !important;
            -webkit-tap-highlight-color: transparent;
        }

        /* صفحه اسپلش اولیه با افکت نور */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000000;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1.5s ease;
        }

        .splash-logo-container {
            position: relative;
            width: 300px;
            height: 300px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 40px;
        }

        .splash-logo {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            object-fit: cover;
            position: relative;
            z-index: 3;
            border: 3px solid rgba(212, 175, 55, 0.3);
            box-shadow: 0 0 50px rgba(212, 175, 55, 0.7);
            animation: logoPulse 3s infinite alternate;
        }

        @keyframes logoPulse {
            0% { 
                transform: scale(1);
                box-shadow: 0 0 50px rgba(212, 175, 55, 0.7);
            }
            100% { 
                transform: scale(1.05);
                box-shadow: 0 0 80px rgba(212, 175, 55, 0.9), 
                            0 0 120px rgba(212, 175, 55, 0.5);
            }
        }

        .splash-glow {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: radial-gradient(circle, 
                rgba(212, 175, 55, 0.8) 0%,
                rgba(212, 175, 55, 0.4) 30%,
                rgba(212, 175, 55, 0.1) 60%,
                transparent 80%);
            z-index: 2;
            animation: glowRotate 20s infinite linear;
            filter: blur(10px);
        }

        @keyframes glowRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .splash-light-rays {
            position: absolute;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .splash-ray {
            position: absolute;
            width: 2px;
            height: 150%;
            background: linear-gradient(to bottom, 
                transparent 0%, 
                rgba(212, 175, 55, 0.8) 50%, 
                transparent 100%);
            top: -25%;
            left: 50%;
            transform-origin: center;
            animation: rayRotate 10s infinite linear;
        }

        .splash-ray:nth-child(1) { transform: rotate(0deg); }
        .splash-ray:nth-child(2) { transform: rotate(45deg); }
        .splash-ray:nth-child(3) { transform: rotate(90deg); }
        .splash-ray:nth-child(4) { transform: rotate(135deg); }
        .splash-ray:nth-child(5) { transform: rotate(180deg); }
        .splash-ray:nth-child(6) { transform: rotate(225deg); }
        .splash-ray:nth-child(7) { transform: rotate(270deg); }
        .splash-ray:nth-child(8) { transform: rotate(315deg); }

        @keyframes rayRotate {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .splash-text {
            color: var(--gold);
            font-size: 2.2rem;
            text-align: center;
            z-index: 4;
            text-shadow: 0 0 15px rgba(212, 175, 55, 0.8);
            animation: textGlow 2s infinite alternate;
            margin-top: 20px;
            font-weight: bold;
            letter-spacing: 2px;
        }

        @keyframes textGlow {
            0% { 
                text-shadow: 0 0 15px rgba(212, 175, 55, 0.8);
                transform: scale(1);
            }
            100% { 
                text-shadow: 0 0 25px rgba(212, 175, 55, 1), 
                             0 0 35px rgba(212, 175, 55, 0.6);
                transform: scale(1.02);
            }
        }

        .splash-subtext {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.2rem;
            text-align: center;
            z-index: 4;
            margin-top: 15px;
            animation: fadeInOut 3s infinite;
        }

        @keyframes fadeInOut {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        /* صفحه لودینگ */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--black);
            z-index: 1000;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease;
        }

        .loading-image {
            width: 100%;
            height: 100%;
            background-image: url('https://raw.githubusercontent.com/ahmadrezaei090-debug/soberWeb/main/negin-art-1764247215354.png');
            background-size: cover;
            background-position: center;
            position: absolute;
            top: 0;
            left: 0;
        }

        .loading-bar-container {
            position: absolute;
            bottom: 80px;
            width: 80%;
            height: 10px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 5px;
            overflow: hidden;
            border: 1px solid var(--gold);
        }

        .loading-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, var(--black), var(--gold));
            border-radius: 5px;
            transition: width 0.3s ease;
        }

        .loading-text {
            position: absolute;
            bottom: 100px;
            color: var(--gold);
            font-size: 1.2rem;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.7);
        }

        /* صفحه منو اصلی */
        .main-menu {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://raw.githubusercontent.com/ahmadrezaei090-debug/Iran-rap/main/-2147483648_-219133.jpg');
            background-size: cover;
            background-position: center;
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 1s ease;
        }

        /* هدر منو */
        .menu-header {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.7);
            animation: rotateLogo 10s infinite linear;
        }

        @keyframes rotateLogo {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .logo-half {
            position: absolute;
            width: 50%;
            height: 100%;
            top: 0;
        }

        .logo-black {
            left: 0;
            background-color: var(--black);
        }

        .logo-gold {
            right: 0;
            background-color: var(--gold);
        }

        .logo-text {
            color: var(--gold);
            font-size: 1.8rem;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.7);
        }

        /* دکمه‌های منو */
        .menu-buttons {
            display: flex;
            flex-direction: column;
            gap: 25px;
            margin-top: 50px;
            align-items: center;
        }

        .menu-btn {
            width: 280px;
            padding: 18px 30px;
            font-size: 1.4rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            position: relative;
            overflow: hidden;
            z-index: 1;
            outline: none !important;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .start-btn {
            background: linear-gradient(45deg, var(--gold), var(--dark-gold));
            color: var(--black);
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
        }

        .online-btn {
            background: linear-gradient(45deg, var(--gray), var(--light-gray));
            color: var(--white);
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.2);
        }

        .menu-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.7);
        }

        .menu-btn:active {
            transform: translateY(0);
            outline: none !important;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
        }

        /* نوار پایین منو - ساده و مدرن */
        .bottom-nav {
            position: absolute;
            bottom: 20px;
            width: 90%;
            max-width: 800px;
            background: rgba(20, 20, 20, 0.95);
            padding: 15px 30px;
            display: flex;
            justify-content: space-around;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: var(--white);
            cursor: pointer;
            transition: all 0.3s ease;
            padding: 10px 15px;
            border-radius: 10px;
            position: relative;
            min-width: 80px;
            outline: none !important;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-3px);
        }

        .nav-item.active {
            background: rgba(212, 175, 55, 0.15);
            color: var(--gold);
        }

        .nav-icon {
            font-size: 1.5rem;
            margin-bottom: 8px;
            transition: all 0.3s ease;
        }

        .nav-item:hover .nav-icon {
            transform: scale(1.1);
        }

        .nav-text {
            font-size: 1rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .nav-item:hover .nav-text {
            color: #ddd;
        }

        .nav-notification {
            position: absolute;
            top: 5px;
            left: 10px;
            background: #ff4757;
            color: white;
            font-size: 0.7rem;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: pulse 1.5s infinite;
        }

        /* دکمه تنظیمات */
        .settings-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: var(--gold);
            border: 2px solid var(--gold);
            border-radius: 50%;
            width: 60px;
            height: 60px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.3);
            outline: none !important;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .settings-btn:hover {
            transform: rotate(90deg);
            background: rgba(212, 175, 55, 0.1);
        }

        .settings-btn:active {
            outline: none !important;
            transform: rotate(90deg) scale(0.95);
        }

        /* پنل‌های مودال - یکپارچه */
        .modal-panel {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            background: var(--panel-bg);
            border-radius: 15px;
            border: 1px solid rgba(212, 175, 55, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.8);
            z-index: 3000;
            overflow: hidden;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-panel.active {
            opacity: 1;
            visibility: visible;
            transform: translate(-50%, -50%) scale(1);
        }

        .modal-header {
            background: rgba(212, 175, 55, 0.1);
            padding: 20px;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 1.8rem;
            color: var(--gold);
            font-weight: bold;
        }

        .close-modal {
            background: rgba(0, 0, 0, 0.5);
            color: var(--gold);
            border: 1px solid var(--gold);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            outline: none !important;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .close-modal:hover {
            transform: rotate(90deg);
            background: rgba(212, 175, 55, 0.2);
        }

        .close-modal:active {
            outline: none !important;
            transform: rotate(90deg) scale(0.95);
        }

        .modal-body {
            padding: 25px;
            overflow-y: auto;
            max-height: calc(85vh - 80px);
        }

        /* پنل انتخاب بازی */
        .game-options-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            padding: 20px 0;
        }

        .game-option-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            padding: 25px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: all 0.3s ease;
            outline: none !important;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .game-option-card:hover {
            transform: translateY(-8px);
            border-color: var(--gold);
            background: rgba(212, 175, 55, 0.05);
        }

        .game-option-card:active {
            outline: none !important;
            transform: translateY(-4px);
        }

        .game-option-icon {
            font-size: 3.5rem;
            color: var(--gold);
            margin-bottom: 15px;
            text-align: center;
        }

        .game-option-title {
            font-size: 1.6rem;
            color: var(--gold);
            margin-bottom: 12px;
            text-align: center;
        }

        .game-option-desc {
            color: #ccc;
            text-align: center;
            line-height: 1.5;
            margin-bottom: 15px;
            font-size: 1rem;
        }

        .game-option-features {
            list-style: none;
            padding: 0;
        }

        .game-option-features li {
            color: #aaa;
            padding: 5px 0;
            position: relative;
            padding-right: 20px;
        }

        .game-option-features li::before {
            content: '✓';
            position: absolute;
            right: 0;
            color: var(--gold);
            font-weight: bold;
        }

        /* صفحه بازی */
        .game-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--black);
            z-index: 1800;
            display: none;
            flex-direction: column;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background-color: rgba(0, 0, 0, 0.9);
            border-bottom: 1px solid var(--gold);
            z-index: 10;
        }

        .game-stats {
            display: flex;
            gap: 25px;
        }

        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-value {
            font-size: 1.5rem;
            color: var(--gold);
            font-weight: bold;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #aaa;
        }

        /* قسمت سوال و جواب با پس‌زمینه جدید */
        .game-question {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 25px;
            text-align: center;
            background-image: url('https://raw.githubusercontent.com/ahmadrezaei090-debug/sober/main/IMG_%DB%B2%DB%B0%DB%B2%DB%B6%DB%B0%DB%B1%DB%B0%DB%B1_%DB%B1%DB%B7%DB%B3%DB%B4%DB%B0%DB%B5.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            position: relative;
        }

        .game-question::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            z-index: 1;
        }

        .game-question > * {
            position: relative;
            z-index: 2;
        }

        .question-text {
            font-size: 1.8rem;
            margin-bottom: 30px;
            max-width: 800px;
            line-height: 1.5;
            color: var(--white);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
        }

        .answer-input {
            width: 80%;
            max-width: 600px;
            padding: 15px;
            font-size: 1.3rem;
            background-color: rgba(0, 0, 0, 0.7);
            border: 2px solid var(--gold);
            border-radius: 10px;
            color: white;
            text-align: center;
            margin-bottom: 25px;
            backdrop-filter: blur(5px);
            outline: none !important;
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        .answer-input:focus {
            outline: none !important;
            box-shadow: 0 0 15px rgba(212, 175, 55, 0.7);
            background-color: rgba(0, 0, 0, 0.8);
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            width: 80%;
            max-width: 800px;
        }

        .option-btn {
            padding: 15px;
            font-size: 1.1rem;
            background-color: rgba(0, 0, 0, 0.7);
            border: 2px solid var(--gold);
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            outline: none !important;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .option-btn:hover {
            background-color: rgba(212, 175, 55, 0.3);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.4);
        }

        .option-btn:active {
            outline: none !important;
            transform: translateY(0);
        }

        .option-btn.correct {
            background-color: rgba(46, 204, 113, 0.8);
            border-color: #27ae60;
        }

        .option-btn.incorrect {
            background-color: rgba(231, 76, 60, 0.8);
            border-color: #c0392b;
        }

        .game-controls {
            padding: 15px;
            display: flex;
            justify-content: center;
            gap: 15px;
            position: relative;
            z-index: 2;
        }

        .control-btn {
            padding: 12px 25px;
            font-size: 1.1rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: bold;
            outline: none !important;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .submit-btn {
            background: linear-gradient(45deg, var(--gold), var(--dark-gold));
            color: var(--black);
        }

        .skip-btn {
            background-color: rgba(0, 0, 0, 0.7);
            color: var(--gold);
            border: 2px solid var(--gold);
        }

        .submit-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(212, 175, 55, 0.5);
        }

        .submit-btn:active {
            outline: none !important;
            transform: translateY(0);
        }

        .skip-btn:hover {
            background-color: rgba(212, 175, 55, 0.2);
            transform: translateY(-3px);
        }

        .skip-btn:active {
            outline: none !important;
            transform: translateY(0);
        }

        .hearts {
            display: flex;
            gap: 8px;
        }

        .heart {
            color: #ff4757;
            font-size: 1.5rem;
        }

        .heart.empty {
            color: #555;
        }

        /* دکمه بازگشت به منو */
        .back-to-menu {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.7);
            color: var(--gold);
            border: 2px solid var(--gold);
            border-radius: 50%;
            width: 50px;
            height: 50px;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
            z-index: 100;
            outline: none !important;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }

        .back-to-menu:hover {
            transform: rotate(-90deg);
            background: rgba(212, 175, 55, 0.1);
        }

        .back-to-menu:active {
            outline: none !important;
            transform: rotate(-90deg) scale(0.95);
        }

        /* بخش بلیط‌های بازی - جدید */
        .game-tickets-container {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px 30px;
            border-radius: 20px;
            border: 2px solid var(--gold);
            backdrop-filter: blur(10px);
            min-width: 250px;
        }

        .tickets-label {
            color: var(--gold);
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .tickets-count {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .ticket-icon {
            color: var(--gold);
            font-size: 1.5rem;
        }

        .ticket-number {
            font-size: 2rem;
            color: var(--gold);
            font-weight: bold;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.5);
        }

        .tickets-warning {
            font-size: 0.9rem;
            color: #ff9900;
            text-align: center;
            margin-top: 5px;
            opacity: 0.8;
        }

        /* پیام بازخورد */
        .feedback-message {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            padding: 20px 40px;
            border-radius: 15px;
            border: 2px solid var(--gold);
            z-index: 3000;
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            animation: fadeInOut 2s ease-in-out;
            display: none;
        }

        .feedback-message.correct {
            color: var(--success);
            border-color: var(--success);
        }

        .feedback-message.incorrect {
            color: var(--error);
            border-color: var(--error);
        }

        /* انیمیشن‌ها */
        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        /* overlay برای پنل‌ها */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 2999;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        /* حالت موبایل */
        @media (max-width: 768px) {
            .splash-logo-container {
                width: 200px;
                height: 200px;
            }
            
            .splash-logo {
                width: 170px;
                height: 170px;
            }
            
            .splash-text {
                font-size: 1.6rem;
            }
            
            .splash-subtext {
                font-size: 1rem;
            }
            
            .menu-btn {
                width: 250px;
                padding: 15px 25px;
                font-size: 1.2rem;
            }
            
            .game-options-grid {
                grid-template-columns: 1fr;
            }
            
            .game-option-card {
                padding: 20px;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .question-text {
                font-size: 1.4rem;
                padding: 0 10px;
            }
            
            .answer-input {
                width: 95%;
                font-size: 1.1rem;
            }
            
            .game-question {
                padding: 15px;
            }
            
            .bottom-nav {
                padding: 12px 20px;
                width: 95%;
            }
            
            .nav-item {
                padding: 8px 12px;
                min-width: auto;
            }
            
            .nav-text {
                font-size: 0.9rem;
            }
            
            .nav-icon {
                font-size: 1.3rem;
            }
            
            .modal-panel {
                width: 95%;
                max-height: 90vh;
            }
            
            .modal-body {
                padding: 20px;
            }
            
            .game-tickets-container {
                padding: 10px 20px;
                min-width: 200px;
                bottom: 10px;
            }
            
            .ticket-number {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .question-text {
                font-size: 1.2rem;
            }
            
            .answer-input {
                font-size: 1rem;
                padding: 12px;
            }
            
            .option-btn {
                padding: 12px;
                font-size: 1rem;
            }
            
            .game-stats {
                gap: 15px;
            }
            
            .stat-value {
                font-size: 1.2rem;
            }
            
            .game-tickets-container {
                padding: 8px 15px;
                min-width: 180px;
            }
        }
    </style>
</head>
<body>
    <!-- صفحه نمایش اولیه -->
    <div class="splash-screen" id="splashScreen">
        <div class="splash-light-rays">
            <div class="splash-ray"></div>
            <div class="splash-ray"></div>
            <div class="splash-ray"></div>
            <div class="splash-ray"></div>
            <div class="splash-ray"></div>
            <div class="splash-ray"></div>
            <div class="splash-ray"></div>
            <div class="splash-ray"></div>
        </div>
        <div class="splash-logo-container">
            <div class="splash-glow"></div>
            <img src="https://raw.githubusercontent.com/ahmadrezaei090-debug/sober/main/InShot_%DB%B2%DB%B0%DB%B2%DB%B5%DB%B1%DB%B2%DB%B1%DB%B4_%DB%B0%DB%B0%DB%B1%DB%B6%DB%B5%DB%B1%DB%B8%DB%B4%DB%B0.jpg" alt="لوگو استدیو اسکورت" class="splash-logo">
        </div>
        <div class="splash-text">استدیو اسکورت گیم</div>
        <div class="splash-subtext">تقدیم کننده بازی هوشیار</div>
    </div>

    <!-- صفحه لودینگ -->
    <div class="loading-screen" id="loadingScreen">
        <div class="loading-image"></div>
        <div class="loading-text">در حال بارگذاری...</div>
        <div class="loading-bar-container">
            <div class="loading-bar" id="loadingBar"></div>
        </div>
    </div>

    <!-- پیام بازخورد -->
    <div class="feedback-message" id="feedbackMessage"></div>

    <!-- منوی اصلی -->
    <div class="main-menu" id="mainMenu">
        <div class="menu-header">
            <div class="logo-circle">
                <div class="logo-half logo-black"></div>
                <div class="logo-half logo-gold"></div>
            </div>
            <div class="logo-text">هوشیار</div>
        </div>
        
        <button class="settings-btn" id="settingsBtn">
            <i class="fas fa-cog"></i>
        </button>
        
        <div class="menu-buttons">
            <button class="menu-btn start-btn" id="startBtn">
                شروع بازی
            </button>
            <button class="menu-btn online-btn" id="onlineBtn">
                بازی آنلاین
            </button>
        </div>
        
        <!-- نوار پایین ساده‌شده -->
        <div class="bottom-nav">
            <div class="nav-item active" id="challengesBtn">
                <i class="fas fa-trophy nav-icon"></i>
                <div class="nav-text">چالش‌ها</div>
                <div class="nav-notification">۳</div>
            </div>
            <div class="nav-item" id="pathsBtn">
                <i class="fas fa-road nav-icon"></i>
                <div class="nav-text">مسیرها</div>
            </div>
            <div class="nav-item" id="ticketsBtn">
                <i class="fas fa-ticket-alt nav-icon"></i>
                <div class="nav-text">بلیط</div>
                <div class="nav-notification">۵</div>
            </div>
            <div class="nav-item" id="creatorsNavBtn">
                <i class="fas fa-users nav-icon"></i>
                <div class="nav-text">سازندگان</div>
            </div>
        </div>
    </div>

    <!-- پنل انتخاب بازی -->
    <div class="modal-overlay" id="gameSelectOverlay"></div>
    <div class="modal-panel" id="gameSelectPanel">
        <div class="modal-header">
            <h2 class="modal-title">انتخاب نوع بازی</h2>
            <button class="close-modal" id="closeGameSelectBtn">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="modal-body">
            <div class="game-options-grid">
                <div class="game-option-card" id="twoHalfGame">
                    <div class="game-option-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3 class="game-option-title">دو نیم فلش</h3>
                    <p class="game-option-desc">
                        در این حالت، چیستان نمایش داده می‌شود و شما باید پاسخ را تایپ کنید. 
                        برای هر سوال ۱۷ ثانیه وقت دارید و ۳ جان در اختیار شماست.
                    </p>
                    <ul class="game-option-features">
                        <li>زمان محدود ۱۷ ثانیه‌ای</li>
                        <li>۳ جان برای هر بازی</li>
                        <li>۷۰ سوال متنوع</li>
                        <li>سیستم امتیازدهی پیشرفته</li>
                        <li>کاهش جان در صورت پاسخ اشتباه</li>
                    </ul>
                </div>
                
                <div class="game-option-card" id="twoOldGame">
                    <div class="game-option-icon">
                        <i class="fas fa-question-circle"></i>
                    </div>
                    <h3 class="game-option-title">دو اولد</h3>
                    <p class="game-option-desc">
                        در این حالت، چیستان با چهار گزینه نمایش داده می‌شود. 
                        شما باید گزینه درست را انتخاب کنید.
                    </p>
                    <ul class="game-option-features">
                        <li>بدون محدودیت زمانی</li>
                        <li>۴ گزینه برای هر سوال</li>
                        <li>۷۰ سوال چالش‌برانگیز</li>
                        <li>مناسب برای تمرین ذهن</li>
                        <li>سیستم بلیط یکسان</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- صفحه بازی دو نیم فلش -->
    <div class="game-screen" id="twoHalfGameScreen">
        <button class="back-to-menu" id="backToGameSelectBtn">
            <i class="fas fa-arrow-right"></i>
        </button>
        
        <div class="game-header">
            <div class="game-stats">
                <div class="stat">
                    <div class="stat-value" id="timer">۱۷</div>
                    <div class="stat-label">ثانیه باقی‌مانده</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="questionNum">۱</div>
                    <div class="stat-label">سوال</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="score">۰</div>
                    <div class="stat-label">امتیاز</div>
                </div>
            </div>
            
            <div class="hearts" id="heartsContainer">
                <i class="fas fa-heart heart"></i>
                <i class="fas fa-heart heart"></i>
                <i class="fas fa-heart heart"></i>
            </div>
        </div>
        
        <div class="game-question">
            <div class="question-text" id="twoHalfQuestion">سوال اینجا نمایش داده می‌شود</div>
            <input type="text" class="answer-input" id="answerInput" placeholder="پاسخ خود را اینجا تایپ کنید...">
            
            <div class="game-controls">
                <button class="control-btn submit-btn" id="submitAnswerBtn">ثبت پاسخ</button>
                <button class="control-btn skip-btn" id="skipQuestionBtn">رد کردن سوال</button>
            </div>
        </div>
        
        <!-- بخش بلیط‌های بازی -->
        <div class="game-tickets-container">
            <div class="tickets-label">بلیط‌های باقی‌مانده</div>
            <div class="tickets-count">
                <i class="fas fa-ticket-alt ticket-icon"></i>
                <div class="ticket-number" id="twoHalfTickets">10</div>
            </div>
            <div class="tickets-warning">هر پاسخ اشتباه یک جان کم می‌کند!</div>
        </div>
    </div>

    <!-- صفحه بازی دو اولد -->
    <div class="game-screen" id="twoOldGameScreen">
        <button class="back-to-menu" id="backToGameSelectBtn2">
            <i class="fas fa-arrow-right"></i>
        </button>
        
        <div class="game-header">
            <div class="game-stats">
                <div class="stat">
                    <div class="stat-value" id="twoOldQuestionNum">۱</div>
                    <div class="stat-label">سوال</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="twoOldScore">۰</div>
                    <div class="stat-label">امتیاز</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="twoOldStreak">۰</div>
                    <div class="stat-label">پاسخ صحیح متوالی</div>
                </div>
            </div>
        </div>
        
        <div class="game-question">
            <div class="question-text" id="twoOldQuestion">سوال اینجا نمایش داده می‌شود</div>
            
            <div class="options-container" id="optionsContainer">
                <button class="option-btn" data-option="1">گزینه اول</button>
                <button class="option-btn" data-option="2">گزینه دوم</button>
                <button class="option-btn" data-option="3">گزینه سوم</button>
                <button class="option-btn" data-option="4">گزینه چهارم</button>
            </div>
        </div>
        
        <!-- بخش بلیط‌های بازی -->
        <div class="game-tickets-container">
            <div class="tickets-label">بلیط‌های باقی‌مانده</div>
            <div class="tickets-count">
                <i class="fas fa-ticket-alt ticket-icon"></i>
                <div class="ticket-number" id="twoOldTickets">10</div>
            </div>
            <div class="tickets-warning">برای ادامه بازی بلیط لازم دارید!</div>
        </div>
    </div>

    <script>
        // داده‌های نمونه برای بازی - چیستان‌های جدید
        const twoHalfQuestions = [
            "ان چیست که در روز هست و در شب نیست؟",
            "ان چیست که بالا می‌رود اما هرگز پایین نمی‌آید؟",
            "ان چیست که هر چه بیشتر از آن بخوری، گرسنه‌تر می‌شوی؟",
            "ان چیست که همه آن را دارند اما کسی آن را نمی‌بیند؟",
            "ان چیست که می‌تواند رودخانه را رد کند اما آب نمی‌خورد؟",
            "ان چیست که از خودش سبک‌تر است اما نمی‌تواند پرواز کند؟",
            "ان چیست که یک سر دارد، یک دم دارد، اما بدن ندارد؟",
            "ان چیست که می‌شکند اما هرگز به زمین نمی‌افتد؟",
            "ان چیست که در تابستان پیدا می‌شود و در زمستان پنهان می‌شود؟",
            "ان چیست که در دریا زندگی می‌کند اما آب نمی‌خورد؟",
            "ان چیست که همیشه در حال دویدن است اما هرگز از جای خود تکان نمی‌خورد؟",
            "ان چیست که پر از سوراخ است اما آب را نگه می‌دارد؟",
            "ان چیست که هر چه پیرتر می‌شود، جوان‌تر می‌شود؟",
            "ان چیست که می‌تواند صحبت کند اما زبان ندارد؟",
            "ان چیست که وقتی نامش را می‌بری، ناپدید می‌شود؟",
            "ان چیست که همیشه گرسنه است و هر چه می‌خورد بزرگتر می‌شود؟",
            "ان چیست که می‌تواند سفر کند اما جای خود را ترک نمی‌کند؟",
            "ان چیست که همه از آن می‌ترسند اما همه به آن نیاز دارند؟",
            "ان چیست که از آهن قوی‌تر است اما از باد می‌ترسد؟",
            "ان چیست که درخت دارد اما برگ ندارد؟",
            "ان چیست که خانه دارد اما در آن زندگی نمی‌کند؟",
            "ان چیست که چهار پا دارد اما نمی‌تواند راه برود؟",
            "ان چیست که پر است اما خالی به نظر می‌رسد؟",
            "ان چیست که همیشه خیس است اما هرگز خشک نمی‌شود؟",
            "ان چیست که می‌تواند شکسته شود اما هرگز خم نمی‌شود؟",
            "ان چیست که در زمستان سبز است و در تابستان سفید؟",
            "ان چیست که پر از دانش است اما چیزی نمی‌داند؟",
            "ان چیست که اگر آن را بشکنی، بهتر کار می‌کند؟",
            "ان چیست که هر چه بیشتر داشته باشی، کمتر می‌بینی؟",
            "ان چیست که همیشه پیروی می‌کند اما هرگز رهبری نمی‌کند؟",
            "ان چیست که هر چه بیشتر بگیری، بیشتر باقی می‌ماند؟",
            "ان چیست که می‌تواند نوری را روشن کند اما خودش تاریک است؟",
            "ان چیست که بدون آن می‌میریم اما از آن می‌ترسیم؟",
            "ان چیست که دور جهان می‌گردد اما در یک گوشه می‌ماند؟",
            "ان چیست که می‌تواند بخورد اما گرسنه نمی‌شود؟",
            "ان چیست که همه جا را می‌بیند اما خودش دیده نمی‌شود؟",
            "ان چیست که بزرگتر از کوه است اما از مورچه کوچک‌تر است؟",
            "ان چیست که اگر آن را نام ببری، از بین می‌رود؟",
            "ان چیست که با یک پا می‌ایستد اما با هزار پا می‌رود؟",
            "ان چیست که هر چه بیشتر بدوی، کمتر پیش می‌روی؟",
            "ان چیست که هنگام تولد چهار پا دارد، هنگام جوانی دو پا، و هنگام پیری سه پا؟",
            "ان چیست که در آسمان است اما روی زمین نیست؟",
            "ان چیست که همیشه می‌آید اما هرگز نمی‌رسد؟",
            "ان چیست که در هر خانه‌ای پیدا می‌شود اما کسی آن را نمی‌خرد؟",
            "ان چیست که می‌تواند صحبت کند اما صدایی ندارد؟",
            "ان چیست که وقتی ساکت است، صدایش را می‌شوند؟",
            "ان چیست که هر چه بیشتر بشویید، کثیف‌تر می‌شود؟",
            "ان چیست که در روز می‌میرد و در شب زنده می‌شود؟",
            "ان چیست که یک چشم دارد اما نمی‌تواند ببیند؟",
            "ان چیست که چرخ دارد اما نمی‌تواند حرکت کند؟",
            "ان چیست که می‌تواند بخواند اما نمی‌تواند بنویسید؟",
            "ان چیست که وقتی می‌افتد، نمی‌شکند؟",
            "ان چیست که هر چه بیشتر یاد می‌گیری، کمتر می‌دانی؟",
            "ان چیست که در زمستان گرم است و در تابستان سرد؟",
            "ان چیست که همیشه در حال تغییر است اما همیشه ثابت می‌ماند؟",
            "ان چیست که هر چه بیشتر آن را پنهان کنی، بیشتر دیده می‌شود؟",
            "ان چیست که می‌تواند بدود اما نمی‌تواند راه برود؟",
            "ان چیست که هر چه بیشتر آن را تقسیم کنی، بزرگتر می‌شود؟",
            "ان چیست که در جنگل پیدا می‌شود اما هرگز رشد نمی‌کند؟",
            "ان چیست که وقتی به آن نیاز داری دور می‌اندازی؟",
            "ان چیست که همیشه در حال فرار است اما هرگز حرکت نمی‌کند؟",
            "ان چیست که می‌تواند سقوط کند اما هرگز بالا نمی‌رود؟",
            "ان چیست که از پنجره می‌تواند وارد شود اما از در نمی‌تواند خارج شود؟",
            "ان چیست که در بهار سبز، در تابستان زرد، در پاییز قرمز و در زمستان سفید است؟",
            "ان چیست که وقتی آن را می‌خوری، بیشتر می‌شود؟",
            "ان چیست که می‌تواند صحبت کند اما حرف نمی‌زند؟",
            "ان چیست که وقتی آن را پیدا می‌کنی، آن را از دست می‌دهی؟",
            "ان چیست که وقتی آن را نگه می‌داری، آن را نمی‌بینی؟",
            "ان چیست که هر چه بزرگتر می‌شود، سبک‌تر می‌شود؟",
            "ان چیست که هر چه بیشتر بگیری، سنگین‌تر می‌شود؟",
            "ان چیست که می‌تواند سفر کند اما جای خود را ترک نمی‌کند؟",
            "ان چیست که در تاریکی پیدا می‌شود اما نور می‌آورد؟",
            "ان چیست که پر از حافظه است اما چیزی به خاطر نمی‌آورد؟",
            "ان چیست که همیشه در حال کار است اما هرگز خسته نمی‌شود؟"
        ];

        const twoOldQuestions = [
            {
                question: "ان چیست که در روز هست و در شب نیست؟",
                options: ["خورشید", "ماه", "ستاره", "سایه"],
                correct: 1
            },
            {
                question: "ان چیست که بالا می‌رود اما هرگز پایین نمی‌آید؟",
                options: ["سن", "دود", "نردبان", "بادکنک"],
                correct: 1
            },
            {
                question: "ان چیست که هر چه بیشتر از آن بخوری، گرسنه‌تر می‌شوی؟",
                options: ["آب", "هوا", "دانش", "نور"],
                correct: 3
            },
            {
                question: "ان چیست که همه آن را دارند اما کسی آن را نمی‌بیند؟",
                options: ["نام", "سایه", "هوا", "فکر"],
                correct: 2
            },
            {
                question: "ان چیست که می‌تواند رودخانه را رد کند اما آب نمی‌خورد؟",
                options: ["پل", "قایق", "پلنگ", "پل چوبی"],
                correct: 1
            },
            {
                question: "ان چیست که از خودش سبک‌تر است اما نمی‌تواند پرواز کند؟",
                options: ["دود", "بخار", "ابر", "هوا"],
                correct: 1
            },
            {
                question: "ان چیست که یک سر دارد، یک دم دارد، اما بدن ندارد؟",
                options: ["سکه", "دکمه", "سوزن", "کلید"],
                correct: 1
            },
            {
                question: "ان چیست که می‌شکند اما هرگز به زمین نمی‌افتد؟",
                options: ["آب", "نور", "صدا", "موج"],
                correct: 2
            },
            {
                question: "ان چیست که در تابستان پیدا می‌شود و در زمستان پنهان می‌شود؟",
                options: ["برف", "یخ", "سرما", "گرما"],
                correct: 1
            },
            {
                question: "ان چیست که در دریا زندگی می‌کند اما آب نمی‌خورد؟",
                options: ["ماهی", "صدف", "نمک", "مرجان"],
                correct: 3
            }
        ];

        // تکمیل داده‌های نمونه برای دو اولد
        for (let i = 11; i <= 70; i++) {
            twoOldQuestions.push({
                question: `سوال نمونه ${i}: این یک سوال تستی است؟`,
                options: [`گزینه اول ${i}`, `گزینه دوم ${i}`, `گزینه سوم ${i}`, `گزینه چهارم ${i}`],
                correct: Math.floor(Math.random() * 4) + 1
            });
        }

        // پاسخ‌های صحیح برای دو نیم فلش
        const twoHalfAnswers = [
            "نور", "سن", "دانش", "سایه", "پل", 
            "دود", "سکه", "آب", "برف", "ماهی", 
            "زمان", "اسفنج", "شمع", "پژواک", "سکوت", 
            "آتش", "کتاب", "مرگ", "آهن‌ربا", "جنگل", 
            "میز", "صندلی", "حباب", "زبان", "یخ", 
            "برف", "کتابخانه", "تخم‌مرغ", "تاریکی", "سایه", 
            "سوراخ", "شمع", "خواب", "تمبر", "ماشین", 
            "چشم", "سایه", "نام", "ساعت", "جا", 
            "انسان", "ابر", "فردا", "گرد و غبار", "کتاب", 
            "پژواک", "آب", "شمع", "سوزن", "میز", 
            "کتاب", "حباب", "جهل", "یخچال", "رودخانه", 
            "سایه", "رود", "سوراخ", "مسیر", "طناب", 
            "گیاه", "لنز", "کتاب", "ماشین زمان", "نور", 
            "کامپیوتر", "زمین", "یخچال", "قایق", "شمع"
        ];

        // عناصر DOM
        const splashScreen = document.getElementById('splashScreen');
        const loadingScreen = document.getElementById('loadingScreen');
        const loadingBar = document.getElementById('loadingBar');
        const mainMenu = document.getElementById('mainMenu');
        const settingsBtn = document.getElementById('settingsBtn');
        const startBtn = document.getElementById('startBtn');
        const onlineBtn = document.getElementById('onlineBtn');
        const feedbackMessage = document.getElementById('feedbackMessage');
        
        // پنل انتخاب بازی
        const gameSelectPanel = document.getElementById('gameSelectPanel');
        const gameSelectOverlay = document.getElementById('gameSelectOverlay');
        const closeGameSelectBtn = document.getElementById('closeGameSelectBtn');
        
        // عناصر بازی
        const twoHalfGame = document.getElementById('twoHalfGame');
        const twoOldGame = document.getElementById('twoOldGame');
        const twoHalfGameScreen = document.getElementById('twoHalfGameScreen');
        const twoOldGameScreen = document.getElementById('twoOldGameScreen');
        const backToGameSelectBtn = document.getElementById('backToGameSelectBtn');
        const backToGameSelectBtn2 = document.getElementById('backToGameSelectBtn2');
        const answerInput = document.getElementById('answerInput');
        const submitAnswerBtn = document.getElementById('submitAnswerBtn');
        const skipQuestionBtn = document.getElementById('skipQuestionBtn');
        const timerElement = document.getElementById('timer');
        const questionNumElement = document.getElementById('questionNum');
        const scoreElement = document.getElementById('score');
        const heartsContainer = document.getElementById('heartsContainer');
        const twoHalfQuestionElement = document.getElementById('twoHalfQuestion');
        const twoOldQuestionElement = document.getElementById('twoOldQuestion');
        const optionsContainer = document.getElementById('optionsContainer');
        const twoOldQuestionNumElement = document.getElementById('twoOldQuestionNum');
        const twoOldScoreElement = document.getElementById('twoOldScore');
        const twoOldStreakElement = document.getElementById('twoOldStreak');
        
        // بخش بلیط‌ها
        const twoHalfTicketsElement = document.getElementById('twoHalfTickets');
        const twoOldTicketsElement = document.getElementById('twoOldTickets');

        // منوی پایین
        const challengesBtn = document.getElementById('challengesBtn');
        const pathsBtn = document.getElementById('pathsBtn');
        const ticketsBtn = document.getElementById('ticketsBtn');
        const creatorsNavBtn = document.getElementById('creatorsNavBtn');

        // متغیرهای حالت بازی
        let currentGame = null;
        let currentQuestionIndex = 0;
        let score = 0;
        let lives = 3;
        let timer = 17;
        let timerInterval = null;
        let imagesLoaded = 0;
        let totalImages = 5;
        
        // متغیرهای بلیط
        let twoHalfTickets = 10;
        let twoOldTickets = 10;
        
        // متغیرهای دو اولد
        let twoOldStreak = 0;

        // لیست تصاویر برای چک کردن لود شدن
        const imagesToLoad = [
            'https://raw.githubusercontent.com/ahmadrezaei090-debug/soberWeb/main/negin-art-1764247215354.png',
            'https://raw.githubusercontent.com/ahmadrezaei090-debug/Iran-rap/main/-2147483648_-219133.jpg',
            'https://raw.githubusercontent.com/ahmadrezaei090-debug/sober/main/IMG_%DB%B2%DB%B0%DB%B2%DB%B6%DB%B0%DB%B1%DB%B0%DB%B1_%DB%B1%DB%B7%DB%B3%DB%B4%DB%B0%DB%B5.jpg',
            'https://raw.githubusercontent.com/ahmadrezaei090-debug/sober/main/InShot_%DB%B2%DB%B0%DB%B2%DB%B5%DB%B1%DB%B2%DB%B1%DB%B4_%DB%B0%DB%B0%DB%B1%DB%B6%DB%B5%DB%B1%DB%B8%DB%B4%DB%B0.jpg'
        ];

        // تابع‌های نمایش پیام بازخورد
        function showFeedback(message, isCorrect) {
            feedbackMessage.textContent = message;
            feedbackMessage.className = `feedback-message ${isCorrect ? 'correct' : 'incorrect'}`;
            feedbackMessage.style.display = 'block';
            
            setTimeout(() => {
                feedbackMessage.style.display = 'none';
            }, 2000);
        }

        // تابع‌های نمایش پنل
        function showModal(panel, overlay) {
            overlay.classList.add('active');
            panel.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function hideModal(panel, overlay) {
            panel.classList.remove('active');
            overlay.classList.remove('active');
            document.body.style.overflow = 'auto';
        }

        // نمایش پنل "به زودی"
        function showSoonPanel(title = "به زودی...") {
            const existingPanel = document.getElementById('soonPanel');
            const existingOverlay = document.getElementById('soonOverlay');
            
            if (existingPanel) {
                existingPanel.remove();
            }
            if (existingOverlay) {
                existingOverlay.remove();
            }
            
            const soonPanel = document.createElement('div');
            soonPanel.className = 'modal-panel message-panel';
            soonPanel.id = 'soonPanel';
            
            const soonOverlay = document.createElement('div');
            soonOverlay.className = 'modal-overlay';
            soonOverlay.id = 'soonOverlay';
            
            soonPanel.innerHTML = `
                <div class="modal-header">
                    <h2 class="modal-title">${title}</h2>
                    <button class="close-modal" id="closeSoonBtn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="message-content">
                        <div class="message-icon">
                            <i class="fas fa-clock"></i>
                        </div>
                        <h2 class="message-title">${title}</h2>
                        <p class="message-text">این بخش به زودی فعال می‌شود. در حال حاضر در دست توسعه است.</p>
                        <button class="ticket-btn" id="closeSoonBtn2" style="width: 200px; margin: 0 auto;">باشه</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(soonOverlay);
            document.body.appendChild(soonPanel);
            
            const closeSoon = () => {
                hideModal(soonPanel, soonOverlay);
                setTimeout(() => {
                    soonPanel.remove();
                    soonOverlay.remove();
                }, 300);
            };
            
            setTimeout(() => {
                showModal(soonPanel, soonOverlay);
                
                document.getElementById('closeSoonBtn').addEventListener('click', closeSoon);
                document.getElementById('closeSoonBtn2').addEventListener('click', closeSoon);
                soonOverlay.addEventListener('click', closeSoon);
            }, 50);
        }

        // نمایش پنل انتخاب بازی
        function showGameSelectPanel() {
            showModal(gameSelectPanel, gameSelectOverlay);
        }

        // شروع بازی دو نیم فلش
        function startTwoHalfGame() {
            currentGame = 'twoHalf';
            currentQuestionIndex = 0;
            score = 0;
            lives = 3;
            twoHalfTickets = 10;
            
            hideModal(gameSelectPanel, gameSelectOverlay);
            
            setTimeout(() => {
                twoHalfGameScreen.style.display = 'flex';
                setTimeout(() => {
                    twoHalfGameScreen.style.opacity = '1';
                    loadTwoHalfQuestion();
                    updateTicketsDisplay();
                    startTimer();
                }, 50);
            }, 300);
        }

        // شروع بازی دو اولد
        function startTwoOldGame() {
            currentGame = 'twoOld';
            currentQuestionIndex = 0;
            score = 0;
            twoOldStreak = 0;
            twoOldTickets = 10;
            
            hideModal(gameSelectPanel, gameSelectOverlay);
            
            setTimeout(() => {
                twoOldGameScreen.style.display = 'flex';
                setTimeout(() => {
                    twoOldGameScreen.style.opacity = '1';
                    loadTwoOldQuestion();
                    updateTicketsDisplay();
                }, 50);
            }, 300);
        }

        // بارگذاری سوال دو نیم فلش
        function loadTwoHalfQuestion() {
            if (currentQuestionIndex >= twoHalfQuestions.length || twoHalfTickets <= 0) {
                showDemoEndPanel();
                return;
            }
            
            twoHalfQuestionElement.textContent = twoHalfQuestions[currentQuestionIndex];
            questionNumElement.textContent = currentQuestionIndex + 1;
            scoreElement.textContent = score;
            answerInput.value = '';
            answerInput.focus();
            
            updateHearts();
            resetTimer();
        }

        // بارگذاری سوال دو اولد
        function loadTwoOldQuestion() {
            if (currentQuestionIndex >= twoOldQuestions.length || twoOldTickets <= 0) {
                showDemoEndPanel();
                return;
            }
            
            const question = twoOldQuestions[currentQuestionIndex];
            twoOldQuestionElement.textContent = question.question;
            twoOldQuestionNumElement.textContent = currentQuestionIndex + 1;
            twoOldScoreElement.textContent = score;
            twoOldStreakElement.textContent = twoOldStreak;
            
            const optionButtons = optionsContainer.querySelectorAll('.option-btn');
            optionButtons.forEach((btn, index) => {
                btn.textContent = question.options[index];
                btn.classList.remove('correct', 'incorrect');
                btn.disabled = false;
            });
        }

        // به‌روزرسانی نمایش بلیط‌ها
        function updateTicketsDisplay() {
            if (currentGame === 'twoHalf') {
                twoHalfTicketsElement.textContent = twoHalfTickets;
            } else {
                twoOldTicketsElement.textContent = twoOldTickets;
            }
        }

        // شروع تایمر
        function startTimer() {
            if (timerInterval) clearInterval(timerInterval);
            
            timerInterval = setInterval(() => {
                timer--;
                timerElement.textContent = timer;
                
                if (timer <= 0) {
                    clearInterval(timerInterval);
                    handleTimeOut();
                }
            }, 1000);
        }

        // ریست تایمر
        function resetTimer() {
            timer = 17;
            timerElement.textContent = timer;
            if (currentGame === 'twoHalf') {
                startTimer();
            }
        }

        // به روز رسانی قلب‌ها
        function updateHearts() {
            const hearts = heartsContainer.querySelectorAll('.heart');
            hearts.forEach((heart, index) => {
                if (index < lives) {
                    heart.classList.remove('empty');
                } else {
                    heart.classList.add('empty');
                }
            });
        }

        // زمانی که زمان تمام می‌شود
        function handleTimeOut() {
            lives--;
            twoHalfTickets--;
            updateHearts();
            updateTicketsDisplay();
            
            showFeedback("زمان تمام شد! یک جان و یک بلیط از دست دادید.", false);
            
            if (lives <= 0 || twoHalfTickets <= 0) {
                setTimeout(() => {
                    showDemoEndPanel();
                }, 2000);
            } else {
                currentQuestionIndex++;
                setTimeout(() => {
                    loadTwoHalfQuestion();
                }, 2000);
            }
        }

        // بررسی پاسخ در بازی دو نیم فلش
        function checkAnswer() {
            const userAnswer = answerInput.value.trim().toLowerCase();
            
            // اگر پاسخ خالی باشد
            if (userAnswer === '') {
                lives--;
                twoHalfTickets--;
                updateHearts();
                updateTicketsDisplay();
                
                showFeedback("پاسخ خالی! یک جان و یک بلیط از دست دادید.", false);
                
                if (lives <= 0 || twoHalfTickets <= 0) {
                    setTimeout(() => {
                        showDemoEndPanel();
                    }, 2000);
                    return;
                }
                
                currentQuestionIndex++;
                setTimeout(() => {
                    loadTwoHalfQuestion();
                }, 2000);
                return;
            }
            
            let isCorrect = false;
            
            if (currentQuestionIndex < twoHalfAnswers.length) {
                const correctAnswer = twoHalfAnswers[currentQuestionIndex].toLowerCase();
                isCorrect = userAnswer === correctAnswer || 
                           userAnswer.includes(correctAnswer) || 
                           correctAnswer.includes(userAnswer);
            } else {
                isCorrect = userAnswer.length > 1;
            }
            
            if (isCorrect) {
                score += 10;
                scoreElement.textContent = score;
                showFeedback("آفرین! پاسخ درست است!", true);
                answerInput.style.borderColor = '#2ecc71';
                answerInput.style.boxShadow = '0 0 10px rgba(46, 204, 113, 0.5)';
            } else {
                lives--;
                twoHalfTickets--;
                updateHearts();
                updateTicketsDisplay();
                
                showFeedback("پاسخ اشتباه! یک جان و یک بلیط از دست دادید.", false);
                answerInput.style.borderColor = '#e74c3c';
                answerInput.style.boxShadow = '0 0 10px rgba(231, 76, 60, 0.5)';
                
                if (lives <= 0 || twoHalfTickets <= 0) {
                    setTimeout(() => {
                        showDemoEndPanel();
                    }, 2000);
                    return;
                }
            }
            
            setTimeout(() => {
                currentQuestionIndex++;
                loadTwoHalfQuestion();
                answerInput.style.borderColor = '#D4AF37';
                answerInput.style.boxShadow = 'none';
            }, 2000);
        }

        // بررسی پاسخ در بازی دو اولد
        function checkTwoOldAnswer(selectedOption) {
            const question = twoOldQuestions[currentQuestionIndex];
            const optionButtons = optionsContainer.querySelectorAll('.option-btn');
            const selectedButton = optionButtons[selectedOption - 1];
            
            optionButtons.forEach(btn => {
                btn.disabled = true;
            });
            
            if (selectedOption === question.correct) {
                selectedButton.classList.add('correct');
                score += 10;
                twoOldStreak++;
                twoOldScoreElement.textContent = score;
                twoOldStreakElement.textContent = twoOldStreak;
                
                showFeedback("آفرین! پاسخ درست است!", true);
                
                // برای هر 5 پاسخ صحیح متوالی یک بلیط جایزه
                if (twoOldStreak % 5 === 0) {
                    twoOldTickets++;
                    showFeedback(`۵ پاسخ صحیح متوالی! یک بلیط دریافت کردید! (مجموع: ${twoOldTickets})`, true);
                    updateTicketsDisplay();
                }
            } else {
                selectedButton.classList.add('incorrect');
                optionButtons[question.correct - 1].classList.add('correct');
                twoOldStreak = 0;
                twoOldStreakElement.textContent = twoOldStreak;
                
                showFeedback("پاسخ اشتباه!", false);
            }
            
            twoOldTickets--;
            updateTicketsDisplay();
            
            setTimeout(() => {
                currentQuestionIndex++;
                if (twoOldTickets <= 0) {
                    showDemoEndPanel();
                } else {
                    loadTwoOldQuestion();
                }
            }, 2000);
        }

        // نمایش پنل پایان دمو
        function showDemoEndPanel() {
            const demoEndPanel = document.createElement('div');
            demoEndPanel.className = 'modal-panel demo-end-panel message-panel';
            demoEndPanel.id = 'demoEndPanel';
            
            const demoOverlay = document.createElement('div');
            demoOverlay.className = 'modal-overlay';
            demoOverlay.id = 'demoOverlay';
            
            const gameName = currentGame === 'twoHalf' ? 'دو نیم فلش' : 'دو اولد';
            
            demoEndPanel.innerHTML = `
                <div class="modal-header">
                    <h2 class="modal-title">پایان بازی</h2>
                    <button class="close-modal" id="closeDemoBtn">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="message-content">
                        <div class="message-icon">
                            <i class="fas fa-flag-checkered"></i>
                        </div>
                        <h2 class="message-title">بازی ${gameName} به پایان رسید!</h2>
                        <p class="message-text">شما با موفقیت تمامی بلیط‌های خود را استفاده کردید.</p>
                        <p class="message-text" style="color: var(--gold); margin-top: 15px;">امتیاز نهایی شما: ${score}</p>
                        <p class="message-text" style="color: var(--gold);">تعداد سوالات پاسخ داده شده: ${currentQuestionIndex}</p>
                        <button class="ticket-btn" id="closeDemoBtn2" style="width: 200px; margin: 0 auto; margin-top: 20px;">بازگشت به منو</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(demoOverlay);
            document.body.appendChild(demoEndPanel);
            
            const closeDemo = () => {
                hideModal(demoEndPanel, demoOverlay);
                setTimeout(() => {
                    demoEndPanel.remove();
                    demoOverlay.remove();
                    
                    // بازگشت به منوی اصلی
                    if (currentGame === 'twoHalf') {
                        twoHalfGameScreen.style.opacity = '0';
                        setTimeout(() => {
                            twoHalfGameScreen.style.display = 'none';
                            showMainMenu();
                        }, 500);
                    } else {
                        twoOldGameScreen.style.opacity = '0';
                        setTimeout(() => {
                            twoOldGameScreen.style.display = 'none';
                            showMainMenu();
                        }, 500);
                    }
                }, 300);
            };
            
            setTimeout(() => {
                showModal(demoEndPanel, demoOverlay);
                
                document.getElementById('closeDemoBtn').addEventListener('click', closeDemo);
                document.getElementById('closeDemoBtn2').addEventListener('click', closeDemo);
                demoOverlay.addEventListener('click', closeDemo);
            }, 50);
        }

        // بررسی لود شدن تصاویر
        function checkImagesLoaded() {
            imagesToLoad.forEach(src => {
                const img = new Image();
                img.onload = imageLoaded;
                img.onerror = imageLoaded;
                img.src = src;
            });
        }

        function imageLoaded() {
            imagesLoaded++;
            const progress = Math.min(100, (imagesLoaded / totalImages) * 100);
            loadingBar.style.width = `${progress}%`;
            
            if (imagesLoaded >= totalImages) {
                setTimeout(() => {
                    loadingScreen.style.opacity = '0';
                    setTimeout(() => {
                        loadingScreen.style.display = 'none';
                        showMainMenu();
                    }, 1000);
                }, 500);
            }
        }

        // نمایش منوی اصلی
        function showMainMenu() {
            mainMenu.style.display = 'flex';
            setTimeout(() => {
                mainMenu.style.opacity = '1';
            }, 50);
        }

        // بازگشت از صفحه بازی به صفحه انتخاب بازی
        function backToGameSelect() {
            if (currentGame === 'twoHalf') {
                if (timerInterval) clearInterval(timerInterval);
                twoHalfGameScreen.style.opacity = '0';
                setTimeout(() => {
                    twoHalfGameScreen.style.display = 'none';
                    showGameSelectPanel();
                }, 500);
            } else {
                twoOldGameScreen.style.opacity = '0';
                setTimeout(() => {
                    twoOldGameScreen.style.display = 'none';
                    showGameSelectPanel();
                }, 500);
            }
        }

        // شروع فرآیند نمایش اسپلش اسکرین
        function startSplashScreen() {
            setTimeout(() => {
                splashScreen.style.opacity = '0';
                setTimeout(() => {
                    splashScreen.style.display = 'none';
                    loadingScreen.style.display = 'flex';
                    setTimeout(() => {
                        loadingScreen.style.opacity = '1';
                        checkImagesLoaded();
                    }, 50);
                }, 1000);
            }, 3000);
        }

        // رویدادهای کلیک
        settingsBtn.addEventListener('click', () => showSoonPanel("تنظیمات"));
        startBtn.addEventListener('click', showGameSelectPanel);
        onlineBtn.addEventListener('click', () => showSoonPanel("بازی آنلاین"));
        
        closeGameSelectBtn.addEventListener('click', () => hideModal(gameSelectPanel, gameSelectOverlay));
        gameSelectOverlay.addEventListener('click', () => hideModal(gameSelectPanel, gameSelectOverlay));
        
        twoHalfGame.addEventListener('click', startTwoHalfGame);
        twoOldGame.addEventListener('click', startTwoOldGame);
        
        // رویدادهای منوی پایین
        challengesBtn.addEventListener('click', () => showSoonPanel("چالش‌ها"));
        pathsBtn.addEventListener('click', () => showSoonPanel("مسیرها"));
        ticketsBtn.addEventListener('click', () => showSoonPanel("بلیط‌ها"));
        creatorsNavBtn.addEventListener('click', () => showSoonPanel("سازندگان"));
        
        backToGameSelectBtn.addEventListener('click', backToGameSelect);
        backToGameSelectBtn2.addEventListener('click', backToGameSelect);
        
        submitAnswerBtn.addEventListener('click', checkAnswer);
        skipQuestionBtn.addEventListener('click', () => {
            currentQuestionIndex++;
            loadTwoHalfQuestion();
        });
        
        answerInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });
        
        // رویدادهای گزینه‌ها در بازی دو اولد
        optionsContainer.addEventListener('click', (e) => {
            if (e.target.classList.contains('option-btn') && !e.target.disabled) {
                const selectedOption = parseInt(e.target.getAttribute('data-option'));
                checkTwoOldAnswer(selectedOption);
            }
        });

        // حذف outline آبی از تمام دکمه‌ها هنگام کلیک
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON' || e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
                e.target.blur();
            }
        });

        document.addEventListener('mousedown', function(e) {
            if (e.target.tagName === 'BUTTON' || 
                e.target.tagName === 'INPUT' || 
                e.target.classList.contains('nav-item') ||
                e.target.classList.contains('game-option-card') ||
                e.target.classList.contains('ticket-btn') ||
                e.target.classList.contains('close-modal') ||
                e.target.classList.contains('settings-btn') ||
                e.target.classList.contains('menu-btn') ||
                e.target.classList.contains('control-btn') ||
                e.target.classList.contains('option-btn') ||
                e.target.classList.contains('back-to-menu')) {
                
                e.preventDefault();
                e.stopPropagation();
            }
        }, true);

        // شروع فرآیند
        startSplashScreen();
        
        // شبیه‌سازی لودینگ برای نمایش بهتر
        let simulatedProgress = 0;
        const simulateLoading = setInterval(() => {
            simulatedProgress += Math.random() * 10;
            if (simulatedProgress > 90) {
                clearInterval(simulateLoading);
            }
            if (simulatedProgress > 100) simulatedProgress = 100;
            
            if (imagesLoaded < totalImages) {
                const progress = Math.min(simulatedProgress, (imagesLoaded / totalImages) * 100);
                loadingBar.style.width = `${progress}%`;
            }
        }, 200);
    </script>
</body>
</html>
