<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>هوشیار - بازی هوشیاری</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #000;
            color: #fff;
            overflow-x: hidden;
            height: 100vh;
            width: 100vw;
        }

        /* Common Styles */
        .hidden {
            display: none !important;
        }

        .gold-text {
            color: #FFD700;
        }

        .gold-border {
            border-color: #FFD700;
        }

        .gold-bg {
            background-color: #FFD700;
        }

        /* Loading Screen */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s ease;
        }

        .loading-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
        }

        .loading-bar-container {
            position: absolute;
            bottom: 50px;
            width: 80%;
            max-width: 500px;
            height: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
        }

        .loading-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #000, #FFD700, #000);
            background-size: 200% 100%;
            border-radius: 5px;
            animation: shimmer 2s infinite;
            transition: width 0.3s ease;
        }

        @keyframes shimmer {
            0% { background-position: -200% 0; }
            100% { background-position: 200% 0; }
        }

        /* Main Menu */
        #main-menu {
            position: relative;
            width: 100%;
            height: 100vh;
            overflow: hidden;
        }

        .menu-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('https://github.com/ahmadrezaei090-debug/Iran-rap/blob/main/-2147483648_-219133.jpg?raw=true');
            background-size: cover;
            background-position: center;
            filter: brightness(0.6);
            z-index: 1;
        }

        .menu-content {
            position: relative;
            z-index: 2;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            padding: 20px;
        }

        .menu-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(90deg, #000 50%, #FFD700 50%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 18px;
            color: white;
            border: 2px solid #FFD700;
        }

        .logo-text {
            font-size: 24px;
            font-weight: bold;
            color: #FFD700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .settings-btn {
            background-color: transparent;
            border: 2px solid #FFD700;
            color: #FFD700;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .settings-btn:hover {
            background-color: rgba(255, 215, 0, 0.1);
            transform: scale(1.05);
        }

        .menu-center {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 30px;
        }

        .menu-title {
            font-size: 48px;
            color: #FFD700;
            text-shadow: 0 0 15px rgba(255, 215, 0, 0.7);
            margin-bottom: 30px;
            text-align: center;
        }

        .game-buttons {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
            max-width: 400px;
        }

        .menu-btn {
            background: linear-gradient(45deg, rgba(0, 0, 0, 0.8), rgba(255, 215, 0, 0.2));
            border: 2px solid #FFD700;
            color: white;
            padding: 18px;
            font-size: 22px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }

        .menu-btn:hover {
            background: linear-gradient(45deg, rgba(255, 215, 0, 0.2), rgba(0, 0, 0, 0.8));
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(255, 215, 0, 0.3);
        }

        .soon {
            background: linear-gradient(45deg, rgba(128, 128, 128, 0.8), rgba(255, 215, 0, 0.1));
            color: #aaa;
        }

        .soon:hover {
            background: linear-gradient(45deg, rgba(128, 128, 128, 0.8), rgba(255, 215, 0, 0.1));
            transform: none;
            box-shadow: none;
            cursor: not-allowed;
        }

        .menu-footer {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            padding: 20px 0;
        }

        .footer-btn {
            background-color: rgba(0, 0, 0, 0.7);
            border: 1px solid #FFD700;
            color: #FFD700;
            padding: 12px 25px;
            border-radius: 10px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 120px;
            text-align: center;
        }

        .footer-btn:hover {
            background-color: rgba(255, 215, 0, 0.1);
            transform: translateY(-3px);
        }

        .record-display {
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid #FFD700;
            border-radius: 15px;
            padding: 15px 25px;
            margin-top: 20px;
            text-align: center;
            width: 100%;
            max-width: 400px;
        }

        .record-title {
            color: #FFD700;
            font-size: 20px;
            margin-bottom: 10px;
        }

        .record-value {
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        /* Game Mode Selection */
        #game-mode-selection {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            padding: 20px;
        }

        .mode-title {
            font-size: 40px;
            color: #FFD700;
            margin-bottom: 40px;
            text-align: center;
        }

        .mode-options {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 40px;
            width: 100%;
            max-width: 800px;
        }

        .mode-card {
            background: linear-gradient(45deg, rgba(0, 0, 0, 0.9), rgba(255, 215, 0, 0.2));
            border: 2px solid #FFD700;
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 350px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .mode-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 15px 30px rgba(255, 215, 0, 0.3);
        }

        .mode-icon {
            font-size: 60px;
            color: #FFD700;
            margin-bottom: 20px;
        }

        .mode-name {
            font-size: 28px;
            color: #FFD700;
            margin-bottom: 15px;
        }

        .mode-description {
            font-size: 16px;
            color: #ddd;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .mode-details {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .detail-item {
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .detail-icon {
            color: #FFD700;
            font-size: 20px;
            margin-bottom: 5px;
        }

        .back-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background-color: transparent;
            border: 2px solid #FFD700;
            color: #FFD700;
            padding: 10px 20px;
            border-radius: 30px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background-color: rgba(255, 215, 0, 0.1);
        }

        /* Game Screens */
        #game-screen, #game-screen-2 {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.95);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            padding: 20px;
        }

        .game-header {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 800px;
            margin-bottom: 30px;
        }

        .game-info {
            display: flex;
            gap: 20px;
        }

        .info-box {
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid #FFD700;
            border-radius: 10px;
            padding: 15px 25px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-width: 120px;
        }

        .info-label {
            color: #FFD700;
            font-size: 16px;
            margin-bottom: 5px;
        }

        .info-value {
            font-size: 24px;
            font-weight: bold;
            color: white;
        }

        .lives-container {
            display: flex;
            gap: 10px;
        }

        .life {
            width: 30px;
            height: 30px;
            background-color: #FFD700;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); opacity: 1; }
            50% { transform: scale(1.1); opacity: 0.8; }
            100% { transform: scale(1); opacity: 1; }
        }

        .game-content {
            width: 100%;
            max-width: 800px;
            background-color: rgba(0, 0, 0, 0.8);
            border: 3px solid #FFD700;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
        }

        .question-text {
            font-size: 28px;
            color: white;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .answer-input {
            width: 100%;
            padding: 15px;
            font-size: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            border: 2px solid #FFD700;
            border-radius: 10px;
            color: white;
            text-align: center;
            margin-bottom: 20px;
        }

        .options-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-top: 30px;
        }

        .option-btn {
            padding: 20px;
            font-size: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            border: 2px solid #FFD700;
            border-radius: 10px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .option-btn:hover {
            background-color: rgba(255, 215, 0, 0.2);
        }

        .timer-container {
            width: 100%;
            max-width: 800px;
            height: 15px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .timer-bar {
            height: 100%;
            width: 100%;
            background: linear-gradient(90deg, #FFD700, #FFA500);
            border-radius: 10px;
            transition: width 1s linear;
        }

        .game-controls {
            display: flex;
            gap: 20px;
        }

        .control-btn {
            padding: 15px 30px;
            font-size: 18px;
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid #FFD700;
            border-radius: 10px;
            color: #FFD700;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 150px;
        }

        .control-btn:hover {
            background-color: rgba(255, 215, 0, 0.1);
        }

        /* Settings Screen */
        #settings-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.98);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10;
            padding: 20px;
        }

        .settings-title {
            font-size: 40px;
            color: #FFD700;
            margin-bottom: 40px;
            text-align: center;
        }

        .settings-options {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
            max-width: 500px;
        }

        .settings-btn {
            padding: 20px;
            font-size: 22px;
            background-color: rgba(0, 0, 0, 0.8);
            border: 2px solid #FFD700;
            border-radius: 15px;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .settings-btn:hover {
            background-color: rgba(255, 215, 0, 0.1);
            transform: translateY(-5px);
        }

        .soon-btn {
            background-color: rgba(128, 128, 128, 0.5);
            color: #aaa;
            cursor: not-allowed;
        }

        .soon-btn:hover {
            background-color: rgba(128, 128, 128, 0.5);
            transform: none;
        }

        /* Results Screen */
        #results-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.98);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 20;
            padding: 20px;
        }

        .results-title {
            font-size: 50px;
            color: #FFD700;
            margin-bottom: 30px;
            text-align: center;
        }

        .results-score {
            font-size: 80px;
            color: white;
            margin-bottom: 30px;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.7);
        }

        .results-details {
            background-color: rgba(0, 0, 0, 0.8);
            border: 3px solid #FFD700;
            border-radius: 20px;
            padding: 30px;
            width: 100%;
            max-width: 500px;
            margin-bottom: 40px;
        }

        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 20px;
        }

        /* Motion Graphics */
        .particle {
            position: absolute;
            border-radius: 50%;
            z-index: 1;
            pointer-events: none;
        }

        .gold-particle {
            background-color: #FFD700;
            box-shadow: 0 0 10px #FFD700;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .menu-title {
                font-size: 36px;
            }
            
            .menu-btn {
                font-size: 18px;
                padding: 15px;
            }
            
            .mode-options {
                flex-direction: column;
                align-items: center;
            }
            
            .game-header {
                flex-direction: column;
                align-items: center;
                gap: 20px;
            }
            
            .options-container {
                grid-template-columns: 1fr;
            }
            
            .footer-btn {
                padding: 10px 15px;
                font-size: 16px;
                min-width: 100px;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <img src="https://github.com/ahmadrezaei090-debug/soberWeb/blob/main/negin-art-1764247215354.png?raw=true" alt="Loading" class="loading-image">
        <div class="loading-bar-container">
            <div class="loading-bar" id="loading-bar"></div>
        </div>
    </div>

    <!-- Main Menu -->
    <div id="main-menu" class="hidden">
        <div class="menu-background"></div>
        <div class="menu-content">
            <div class="menu-header">
                <div class="logo-container">
                    <div class="logo-circle">ه</div>
                    <div class="logo-text">هوشیار</div>
                </div>
                <button class="settings-btn" id="settings-btn">
                    <i class="fas fa-cog"></i> تنظیمات
                </button>
            </div>
            
            <div class="menu-center">
                <h1 class="menu-title">بازی هوشیار</h1>
                
                <div class="game-buttons">
                    <button class="menu-btn" id="start-game-btn">
                        <i class="fas fa-play-circle"></i> شروع بازی
                    </button>
                    <button class="menu-btn soon" id="online-game-btn" disabled>
                        <i class="fas fa-globe"></i> بازی آنلاین (به زودی)
                    </button>
                </div>
                
                <div class="record-display">
                    <div class="record-title">رکورد شما</div>
                    <div class="record-value" id="record-value">0</div>
                </div>
            </div>
            
            <div class="menu-footer">
                <button class="footer-btn" id="challenges-btn">چالش ها</button>
                <button class="footer-btn" id="paths-btn">مسیر ها</button>
                <button class="footer-btn" id="tickets-btn">بلیط</button>
            </div>
        </div>
    </div>

    <!-- Game Mode Selection -->
    <div id="game-mode-selection" class="hidden">
        <h2 class="mode-title">انتخاب نوع بازی</h2>
        
        <div class="mode-options">
            <div class="mode-card" id="mode-1">
                <div class="mode-icon"><i class="fas fa-keyboard"></i></div>
                <h3 class="mode-name">دو نیم فلش</h3>
                <p class="mode-description">در این حالت بازی، چیستان نمایش داده می‌شود و شما باید جواب را تایپ کنید. برای هر سوال ۱۷ ثانیه وقت دارید و ۳ جان در اختیار شماست.</p>
                <div class="mode-details">
                    <div class="detail-item">
                        <div class="detail-icon"><i class="fas fa-clock"></i></div>
                        <div>۱۷ ثانیه</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-icon"><i class="fas fa-heart"></i></div>
                        <div>۳ جان</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-icon"><i class="fas fa-question"></i></div>
                        <div>۷۰ سوال</div>
                    </div>
                </div>
            </div>
            
            <div class="mode-card" id="mode-2">
                <div class="mode-icon"><i class="fas fa-mouse-pointer"></i></div>
                <h3 class="mode-name">دو اولد</h3>
                <p class="mode-description">در این حالت بازی، چیستان نمایش داده می‌شود و شما باید از بین ۴ گزینه، پاسخ صحیح را انتخاب کنید. محدودیت زمانی و جان ندارید.</p>
                <div class="mode-details">
                    <div class="detail-item">
                        <div class="detail-icon"><i class="fas fa-infinity"></i></div>
                        <div>زمان نامحدود</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-icon"><i class="fas fa-heart"></i></div>
                        <div>جان نامحدود</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-icon"><i class="fas fa-question"></i></div>
                        <div>۷۰ سوال</div>
                    </div>
                </div>
            </div>
        </div>
        
        <button class="back-btn" id="back-to-menu-btn">
            <i class="fas fa-arrow-right"></i> بازگشت به منو
        </button>
    </div>

    <!-- Game Screen 1 (دو نیم فلش) -->
    <div id="game-screen" class="hidden">
        <div class="game-header">
            <div class="game-info">
                <div class="info-box">
                    <div class="info-label">سوال</div>
                    <div class="info-value" id="question-number-1">1/70</div>
                </div>
                <div class="info-box">
                    <div class="info-label">امتیاز</div>
                    <div class="info-value" id="score-1">0</div>
                </div>
            </div>
            
            <div class="game-info">
                <div class="info-box">
                    <div class="info-label">زمان</div>
                    <div class="info-value" id="time-1">۱۷</div>
                </div>
                <div class="info-box">
                    <div class="info-label">جان</div>
                    <div class="lives-container" id="lives-container-1">
                        <div class="life"></div>
                        <div class="life"></div>
                        <div class="life"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="timer-container">
            <div class="timer-bar" id="timer-bar-1"></div>
        </div>
        
        <div class="game-content">
            <div class="question-text" id="question-text-1">
                سوال چیستان اینجا نمایش داده می‌شود؟
            </div>
            
            <input type="text" class="answer-input" id="answer-input" placeholder="پاسخ خود را اینجا تایپ کنید...">
        </div>
        
        <div class="game-controls">
            <button class="control-btn" id="submit-answer-btn">ارسال پاسخ</button>
            <button class="control-btn" id="pause-game-btn">توقف بازی</button>
            <button class="control-btn" id="end-game-btn">پایان بازی</button>
        </div>
    </div>

    <!-- Game Screen 2 (دو اولد) -->
    <div id="game-screen-2" class="hidden">
        <div class="game-header">
            <div class="game-info">
                <div class="info-box">
                    <div class="info-label">سوال</div>
                    <div class="info-value" id="question-number-2">1/70</div>
                </div>
                <div class="info-box">
                    <div class="info-label">امتیاز</div>
                    <div class="info-value" id="score-2">0</div>
                </div>
            </div>
        </div>
        
        <div class="game-content">
            <div class="question-text" id="question-text-2">
                سوال چیستان اینجا نمایش داده می‌شود؟
            </div>
            
            <div class="options-container" id="options-container">
                <button class="option-btn" data-index="0">گزینه ۱</button>
                <button class="option-btn" data-index="1">گزینه ۲</button>
                <button class="option-btn" data-index="2">گزینه ۳</button>
                <button class="option-btn" data-index="3">گزینه ۴</button>
            </div>
        </div>
        
        <div class="game-controls">
            <button class="control-btn" id="submit-answer-btn-2">ارسال پاسخ</button>
            <button class="control-btn" id="end-game-btn-2">پایان بازی</button>
        </div>
    </div>

    <!-- Settings Screen -->
    <div id="settings-screen" class="hidden">
        <h2 class="settings-title">تنظیمات</h2>
        
        <div class="settings-options">
            <button class="settings-btn" id="contact-btn">
                <i class="fas fa-envelope"></i> ارتباط با ما
            </button>
            <button class="settings-btn" id="creators-btn">
                <i class="fas fa-users"></i> سازندگان
            </button>
            <button class="settings-btn soon-btn">
                <i class="fas fa-hourglass-half"></i> به زودی‌ها
            </button>
            <button class="settings-btn soon-btn">
                <i class="fas fa-gamepad"></i> بازی با موشن گرافیک
            </button>
            <button class="settings-btn" id="back-from-settings-btn">
                <i class="fas fa-arrow-right"></i> بازگشت
            </button>
        </div>
    </div>

    <!-- Results Screen -->
    <div id="results-screen" class="hidden">
        <h2 class="results-title">نتایج بازی</h2>
        <div class="results-score" id="final-score">۰</div>
        
        <div class="results-details">
            <div class="result-item">
                <span>سوالات پاسخ داده شده:</span>
                <span id="answered-questions">۰</span>
            </div>
            <div class="result-item">
                <span>پاسخ‌های صحیح:</span>
                <span id="correct-answers">۰</span>
            </div>
            <div class="result-item">
                <span>پاسخ‌های نادرست:</span>
                <span id="wrong-answers">۰</span>
            </div>
            <div class="result-item">
                <span>زمان بازی:</span>
                <span id="game-time">۰ ثانیه</span>
            </div>
            <div class="result-item">
                <span>رکورد جدید:</span>
                <span id="new-record">خیر</span>
            </div>
        </div>
        
        <div class="game-controls">
            <button class="control-btn" id="play-again-btn">بازی مجدد</button>
            <button class="control-btn" id="back-to-menu-from-results-btn">بازگشت به منو</button>
        </div>
    </div>

    <script>
        // متغیرهای اصلی بازی
        let currentScreen = 'loading';
        let gameMode = null;
        let currentQuestion = 0;
        let score = 0;
        let lives = 3;
        let timeLeft = 17;
        let timer = null;
        let gameQuestions = [];
        let gameStartTime = null;
        let gameEndTime = null;
        let userAnswers = [];
        let correctAnswersCount = 0;
        
        // سوالات بازی (۷۰ سوال برای هر دو حالت)
        const riddles = [
            { question: "چه چیزی هست که هر چه بیشترش را برداریم، بزرگتر می‌شود؟", answer: "چاله", options: ["چاله", "کوه", "دریا", "سوراخ"] },
            { question: "درخت است ولی برگ ندارد، خانه است ولی ساکن ندارد، چیست؟", answer: "درخت خانواده", options: ["درخت خانواده", "درخت کریسمس", "درخت بادام", "درخت سرو"] },
            { question: "چه چیزی را می‌شکند اما هیچ وقت به زمین نمی‌افتد؟", answer: "رکورد", options: ["رکورد", "ظرف", "آینه", "پنجره"] },
            { question: "دور شهر می‌گردد اما از جای خود تکان نمی‌خورد، چیست؟", answer: "دیوار", options: ["دیوار", "جاده", "نهر", "پل"] },
            { question: "با یک پا ایستاده، با دو پا خوابیده، چیست؟", answer: "عدد ۷", options: ["عدد ۷", "عدد ۴", "عدد ۱۰", "عدد ۸"] },
            { question: "همیشه گرسنه است، هر چه به او بدهید می‌خورد، اما اگر آب بنوشد می‌میرد. چیست؟", answer: "آتش", options: ["آتش", "خاک", "باد", "چاه"] },
            { question: "خانه‌ای است بدون در و پنجره، چیست؟", answer: "تخم مرغ", options: ["تخم مرغ", "مغز", "قلب", "غار"] },
            { question: "هر چه بیشتر داشته باشد کمتر می‌بیند، چیست؟", answer: "تاریکی", options: ["تاریکی", "نور", "پول", "غذا"] },
            { question: "پدر و مادری دارد اما خودش فرزند نیست، چیست؟", answer: "مرغ", options: ["مرغ", "تخم مرغ", "جوجه", "بذر"] },
            { question: "چیزی است که وقتی نامش را می‌بری، می‌شکند؟", answer: "سکوت", options: ["سکوت", "آینه", "شیشه", "قلب"] },
            // ۶۰ سوال دیگر اضافه می‌شود
        ];

        // برای کامل کردن ۷۰ سوال، سوالات تکراری اضافه می‌کنیم (در حالت واقعی باید ۷۰ سوال متفاوت باشند)
        for (let i = 0; i < 60; i++) {
            const index = i % 10;
            riddles.push({
                question: `سوال نمونه ${i + 11}: ${riddles[index].question}`,
                answer: `پاسخ ${i + 11}`,
                options: [`گزینه ۱ سوال ${i + 11}`, `گزینه ۲ سوال ${i + 11}`, `گزینه ۳ سوال ${i + 11}`, `گزینه ۴ سوال ${i + 11}`]
            });
        }

        // عناصر DOM
        const loadingScreen = document.getElementById('loading-screen');
        const loadingBar = document.getElementById('loading-bar');
        const mainMenu = document.getElementById('main-menu');
        const gameModeSelection = document.getElementById('game-mode-selection');
        const gameScreen1 = document.getElementById('game-screen');
        const gameScreen2 = document.getElementById('game-screen-2');
        const settingsScreen = document.getElementById('settings-screen');
        const resultsScreen = document.getElementById('results-screen');
        
        // رکورد کاربر از localStorage
        let userRecord = localStorage.getItem('hoshiarRecord') || 0;
        document.getElementById('record-value').textContent = userRecord;

        // پیش‌بارگذاری تصاویر
        function preloadImages() {
            const images = [
                'https://github.com/ahmadrezaei090-debug/soberWeb/blob/main/negin-art-1764247215354.png?raw=true',
                'https://github.com/ahmadrezaei090-debug/Iran-rap/blob/main/-2147483648_-219133.jpg?raw=true'
            ];
            
            let loadedImages = 0;
            const totalImages = images.length;
            
            images.forEach(src => {
                const img = new Image();
                img.onload = () => {
                    loadedImages++;
                    const progress = Math.floor((loadedImages / totalImages) * 100);
                    loadingBar.style.width = `${progress}%`;
                    
                    if (loadedImages === totalImages) {
                        // تمام تصاویر لود شده‌اند
                        setTimeout(() => {
                            loadingScreen.style.opacity = '0';
                            setTimeout(() => {
                                loadingScreen.classList.add('hidden');
                                mainMenu.classList.remove('hidden');
                                currentScreen = 'menu';
                                createParticles();
                            }, 500);
                        }, 1000);
                    }
                };
                img.onerror = () => {
                    loadedImages++;
                    const progress = Math.floor((loadedImages / totalImages) * 100);
                    loadingBar.style.width = `${progress}%`;
                    
                    if (loadedImages === totalImages) {
                        setTimeout(() => {
                            loadingScreen.style.opacity = '0';
                            setTimeout(() => {
                                loadingScreen.classList.add('hidden');
                                mainMenu.classList.remove('hidden');
                                currentScreen = 'menu';
                                createParticles();
                            }, 500);
                        }, 1000);
                    }
                };
                img.src = src;
            });
        }

        // ایجاد ذرات طلایی برای موشن گرافیک
        function createParticles() {
            const particlesContainer = document.createElement('div');
            particlesContainer.id = 'particles-container';
            particlesContainer.style.position = 'fixed';
            particlesContainer.style.top = '0';
            particlesContainer.style.left = '0';
            particlesContainer.style.width = '100%';
            particlesContainer.style.height = '100%';
            particlesContainer.style.pointerEvents = 'none';
            particlesContainer.style.zIndex = '1';
            document.body.appendChild(particlesContainer);
            
            for (let i = 0; i < 50; i++) {
                createParticle(particlesContainer);
            }
            
            setInterval(() => {
                if (particlesContainer.children.length < 50) {
                    createParticle(particlesContainer);
                }
            }, 1000);
        }
        
        function createParticle(container) {
            const particle = document.createElement('div');
            particle.classList.add('particle', 'gold-particle');
            
            const size = Math.random() * 10 + 5;
            particle.style.width = `${size}px`;
            particle.style.height = `${size}px`;
            
            const startX = Math.random() * window.innerWidth;
            const startY = Math.random() * window.innerHeight;
            particle.style.left = `${startX}px`;
            particle.style.top = `${startY}px`;
            
            container.appendChild(particle);
            
            // حرکت ذره
            const animationDuration = Math.random() * 10 + 10;
            const endX = startX + (Math.random() * 200 - 100);
            const endY = startY + (Math.random() * 200 - 100);
            
            particle.animate([
                { transform: `translate(0, 0)`, opacity: 1 },
                { transform: `translate(${endX - startX}px, ${endY - startY}px)`, opacity: 0 }
            ], {
                duration: animationDuration * 1000,
                easing: 'ease-in-out'
            });
            
            // حذف ذره بعد از اتمام انیمیشن
            setTimeout(() => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
            }, animationDuration * 1000);
        }

        // تغییر صفحه نمایش
        function showScreen(screenName) {
            // مخفی کردن همه صفحات
            document.querySelectorAll('div[id$="screen"], div[id$="selection"], #main-menu').forEach(el => {
                el.classList.add('hidden');
            });
            
            currentScreen = screenName;
            
            // نمایش صفحه مورد نظر
            switch(screenName) {
                case 'menu':
                    mainMenu.classList.remove('hidden');
                    break;
                case 'mode-selection':
                    gameModeSelection.classList.remove('hidden');
                    break;
                case 'game-1':
                    gameScreen1.classList.remove('hidden');
                    startGame1();
                    break;
                case 'game-2':
                    gameScreen2.classList.remove('hidden');
                    startGame2();
                    break;
                case 'settings':
                    settingsScreen.classList.remove('hidden');
                    break;
                case 'results':
                    resultsScreen.classList.remove('hidden');
                    break;
            }
        }

        // شروع بازی حالت ۱ (دو نیم فلش)
        function startGame1() {
            gameMode = 1;
            currentQuestion = 0;
            score = 0;
            lives = 3;
            timeLeft = 17;
            userAnswers = [];
            correctAnswersCount = 0;
            gameQuestions = [...riddles].sort(() => Math.random() - 0.5).slice(0, 70);
            gameStartTime = new Date();
            
            updateGame1UI();
            startTimer();
        }
        
        function updateGame1UI() {
            document.getElementById('question-number-1').textContent = `${currentQuestion + 1}/70`;
            document.getElementById('score-1').textContent = score;
            document.getElementById('time-1').textContent = timeLeft;
            document.getElementById('question-text-1').textContent = gameQuestions[currentQuestion].question;
            document.getElementById('answer-input').value = '';
            
            // به روزرسانی جان‌ها
            const livesContainer = document.getElementById('lives-container-1');
            livesContainer.innerHTML = '';
            for (let i = 0; i < lives; i++) {
                const life = document.createElement('div');
                life.classList.add('life');
                livesContainer.appendChild(life);
            }
            
            // تایمر
            document.getElementById('timer-bar-1').style.width = '100%';
        }
        
        function startTimer() {
            if (timer) clearInterval(timer);
            
            timeLeft = 17;
            document.getElementById('timer-bar-1').style.width = '100%';
            
            timer = setInterval(() => {
                timeLeft--;
                document.getElementById('time-1').textContent = timeLeft;
                document.getElementById('timer-bar-1').style.width = `${(timeLeft / 17) * 100}%`;
                
                if (timeLeft <= 0) {
                    timeUp();
                }
            }, 1000);
        }
        
        function timeUp() {
            clearInterval(timer);
            lives--;
            userAnswers.push({
                question: gameQuestions[currentQuestion].question,
                userAnswer: 'زمان تمام شد',
                correctAnswer: gameQuestions[currentQuestion].answer,
                isCorrect: false
            });
            
            if (lives <= 0) {
                endGame();
            } else {
                nextQuestion();
            }
        }
        
        function nextQuestion() {
            currentQuestion++;
            
            if (currentQuestion >= gameQuestions.length) {
                endGame();
            } else {
                updateGame1UI();
                startTimer();
            }
        }
        
        function checkAnswer1() {
            const userAnswer = document.getElementById('answer-input').value.trim().toLowerCase();
            const correctAnswer = gameQuestions[currentQuestion].answer.toLowerCase();
            
            const isCorrect = userAnswer === correctAnswer;
            
            userAnswers.push({
                question: gameQuestions[currentQuestion].question,
                userAnswer: userAnswer,
                correctAnswer: gameQuestions[currentQuestion].answer,
                isCorrect: isCorrect
            });
            
            if (isCorrect) {
                score += 10;
                correctAnswersCount++;
                
                // نمایش افکت پاسخ صحیح
                document.getElementById('question-text-1').style.color = '#4CAF50';
                setTimeout(() => {
                    document.getElementById('question-text-1').style.color = 'white';
                }, 300);
            } else {
                lives--;
                
                // نمایش افکت پاسخ نادرست
                document.getElementById('question-text-1').style.color = '#F44336';
                setTimeout(() => {
                    document.getElementById('question-text-1').style.color = 'white';
                }, 300);
                
                if (lives <= 0) {
                    endGame();
                    return;
                }
            }
            
            nextQuestion();
        }

        // شروع بازی حالت ۲ (دو اولد)
        function startGame2() {
            gameMode = 2;
            currentQuestion = 0;
            score = 0;
            userAnswers = [];
            correctAnswersCount = 0;
            gameQuestions = [...riddles].sort(() => Math.random() - 0.5).slice(0, 70);
            gameStartTime = new Date();
            
            updateGame2UI();
        }
        
        function updateGame2UI() {
            document.getElementById('question-number-2').textContent = `${currentQuestion + 1}/70`;
            document.getElementById('score-2').textContent = score;
            document.getElementById('question-text-2').textContent = gameQuestions[currentQuestion].question;
            
            const optionsContainer = document.getElementById('options-container');
            const options = gameQuestions[currentQuestion].options.sort(() => Math.random() - 0.5);
            
            optionsContainer.querySelectorAll('.option-btn').forEach((btn, index) => {
                btn.textContent = options[index];
                btn.dataset.value = options[index];
            });
            
            // حذف انتخاب قبلی
            optionsContainer.querySelectorAll('.option-btn').forEach(btn => {
                btn.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
                btn.style.color = 'white';
            });
        }
        
        function checkAnswer2(selectedOption) {
            const userAnswer = selectedOption;
            const correctAnswer = gameQuestions[currentQuestion].answer;
            
            const isCorrect = userAnswer === correctAnswer;
            
            userAnswers.push({
                question: gameQuestions[currentQuestion].question,
                userAnswer: userAnswer,
                correctAnswer: correctAnswer,
                isCorrect: isCorrect
            });
            
            if (isCorrect) {
                score += 10;
                correctAnswersCount++;
                
                // نمایش افکت پاسخ صحیح
                const selectedBtn = [...document.querySelectorAll('.option-btn')].find(btn => btn.dataset.value === userAnswer);
                if (selectedBtn) {
                    selectedBtn.style.backgroundColor = '#4CAF50';
                    selectedBtn.style.color = 'white';
                }
            } else {
                // نمایش افکت پاسخ نادرست
                const selectedBtn = [...document.querySelectorAll('.option-btn')].find(btn => btn.dataset.value === userAnswer);
                if (selectedBtn) {
                    selectedBtn.style.backgroundColor = '#F44336';
                    selectedBtn.style.color = 'white';
                }
                
                // نمایش پاسخ صحیح
                const correctBtn = [...document.querySelectorAll('.option-btn')].find(btn => btn.dataset.value === correctAnswer);
                if (correctBtn) {
                    setTimeout(() => {
                        correctBtn.style.backgroundColor = '#4CAF50';
                        correctBtn.style.color = 'white';
                    }, 500);
                }
            }
            
            setTimeout(() => {
                currentQuestion++;
                
                if (currentQuestion >= gameQuestions.length) {
                    endGame();
                } else {
                    updateGame2UI();
                }
            }, 1500);
        }

        // پایان بازی
        function endGame() {
            if (timer) clearInterval(timer);
            
            gameEndTime = new Date();
            const gameDuration = Math.floor((gameEndTime - gameStartTime) / 1000);
            
            // ذخیره رکورد اگر بهتر از رکورد قبلی باشد
            if (score > userRecord) {
                userRecord = score;
                localStorage.setItem('hoshiarRecord', userRecord);
                document.getElementById('record-value').textContent = userRecord;
            }
            
            // ذخیره اطلاعات بازی در localStorage
            const gameData = {
                mode: gameMode,
                score: score,
                date: new Date().toISOString(),
                duration: gameDuration,
                correctAnswers: correctAnswersCount,
                totalQuestions: gameQuestions.length,
                userAnswers: userAnswers
            };
            
            const allGames = JSON.parse(localStorage.getItem('hoshiarGames') || '[]');
            allGames.push(gameData);
            localStorage.setItem('hoshiarGames', JSON.stringify(allGames));
            
            // نمایش صفحه نتایج
            document.getElementById('final-score').textContent = score;
            document.getElementById('answered-questions').textContent = userAnswers.length;
            document.getElementById('correct-answers').textContent = correctAnswersCount;
            document.getElementById('wrong-answers').textContent = userAnswers.length - correctAnswersCount;
            document.getElementById('game-time').textContent = `${gameDuration} ثانیه`;
            document.getElementById('new-record').textContent = score > localStorage.getItem('hoshiarRecord') ? 'بله' : 'خیر';
            
            showScreen('results');
        }

        // مدیریت رویدادها
        document.getElementById('start-game-btn').addEventListener('click', () => {
            showScreen('mode-selection');
        });
        
        document.getElementById('settings-btn').addEventListener('click', () => {
            showScreen('settings');
        });
        
        document.getElementById('back-to-menu-btn').addEventListener('click', () => {
            showScreen('menu');
        });
        
        document.getElementById('back-from-settings-btn').addEventListener('click', () => {
            showScreen('menu');
        });
        
        document.getElementById('mode-1').addEventListener('click', () => {
            showScreen('game-1');
        });
        
        document.getElementById('mode-2').addEventListener('click', () => {
            showScreen('game-2');
        });
        
        document.getElementById('submit-answer-btn').addEventListener('click', () => {
            checkAnswer1();
        });
        
        document.getElementById('answer-input').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                checkAnswer1();
            }
        });
        
        document.getElementById('pause-game-btn').addEventListener('click', () => {
            if (timer) {
                clearInterval(timer);
                timer = null;
                document.getElementById('pause-game-btn').innerHTML = '<i class="fas fa-play"></i> ادامه بازی';
            } else {
                startTimer();
                document.getElementById('pause-game-btn').innerHTML = '<i class="fas fa-pause"></i> توقف بازی';
            }
        });
        
        document.getElementById('end-game-btn').addEventListener('click', () => {
            if (confirm('آیا از پایان بازی اطمینان دارید؟')) {
                endGame();
            }
        });
        
        document.getElementById('submit-answer-btn-2').addEventListener('click', () => {
            const selectedOption = document.querySelector('.option-btn.selected');
            if (selectedOption) {
                checkAnswer2(selectedOption.dataset.value);
            } else {
                alert('لطفاً یک گزینه انتخاب کنید');
            }
        });
        
        document.getElementById('end-game-btn-2').addEventListener('click', () => {
            if (confirm('آیا از پایان بازی اطمینان دارید؟')) {
                endGame();
            }
        });
        
        document.getElementById('play-again-btn').addEventListener('click', () => {
            if (gameMode === 1) {
                showScreen('game-1');
            } else {
                showScreen('game-2');
            }
        });
        
        document.getElementById('back-to-menu-from-results-btn').addEventListener('click', () => {
            showScreen('menu');
        });
        
        // مدیریت کلیک بر گزینه‌ها در حالت ۲
        document.querySelectorAll('.option-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                // حذف انتخاب قبلی
                document.querySelectorAll('.option-btn').forEach(b => {
                    b.classList.remove('selected');
                    b.style.backgroundColor = 'rgba(0, 0, 0, 0.7)';
                    b.style.color = 'white';
                });
                
                // انتخاب گزینه جدید
                this.classList.add('selected');
                this.style.backgroundColor = 'rgba(255, 215, 0, 0.3)';
                this.style.color = '#FFD700';
            });
        });
        
        // دکمه‌های پایین صفحه
        document.getElementById('challenges-btn').addEventListener('click', () => {
            alert('قسمت چالش‌ها به زودی اضافه خواهد شد');
        });
        
        document.getElementById('paths-btn').addEventListener('click', () => {
            alert('قسمت مسیرها به زودی اضافه خواهد شد');
        });
        
        document.getElementById('tickets-btn').addEventListener('click', () => {
            alert('قسمت بلیط به زودی اضافه خواهد شد');
        });
        
        // دکمه‌های تنظیمات
        document.getElementById('contact-btn').addEventListener('click', () => {
            alert('ارتباط با ما: example@hoshiar.com');
        });
        
        document.getElementById('creators-btn').addEventListener('click', () => {
            alert('سازندگان: تیم هوشیار\nبا افتخار ایرانی');
        });

        // شروع لودینگ
        window.addEventListener('load', () => {
            preloadImages();
        });
    </script>
</body>
</html>
